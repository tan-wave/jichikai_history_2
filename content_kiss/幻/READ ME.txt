KISS NT

・ajaxの簡単な無効化方法が判明したのでこの内容はボツになりました。


--2020追記--
ChromeだけでなくFirefoxでもリンクが作動しなくなり、またEdgeもChromium版になる際に作動しなくなる可能性があるため、その対応をする必要が生じました。
リンク時にXMLHttpRequest的なのを使っているのが原因のようですが、もとのjquery mobileのjsファイルを改変することは困難なので、jquery.mobileの代わりのプログラムを自作し、jquery mobileのcssファイルと組み合わせることでできるだけ機能を再現することとしました。
具体的にはreplaceJqueryMobile.jsを作成し、元のプログラムと同様のclass属性付与などを行うことで機能を再現しています。
また、replaceJqueryMobile.cssを追加して機能を一部代替しています。

元と違う箇所は以下の通りです。
・アイコンの画像などを変えることはできません（KISSの移植に必要な部分のみ再現しています）
ただし、data-themeとdata-content-themeのみa,bを指定して変更できます

・リストパネルが収納されるアニメーションがない
・フッターを収納させる機能がない
・ボタンを押したときに青く光る機能がない
・自動で高さを調整する機能には多少違いがあると思う

なお、jQuery MobileはMITライセンスに従っています（ソースファイルの先頭を参照）。
https://opensource.org/licenses/mit-license.php
そのため、jQuery Mobileの改造に関して問題は無いと判断しています。
ただし、元の「KISS ～Kishi-Kho Information Serving System～」に対しては、改造・再配布の許可を取っていません。まあ自治会室にしまっておくだけなので……


--以下2018改造--
このソフトは、2014年情報ゼミが開発したブラウザ版「KISS～the second stage～」をむりやり改変したものです。

・デスクトップでも使用できるようにしました（従来通りスマホでも）
・オフラインで使用できるようにしました（自治会PCでの使用を考慮）
・プログラム的には色々変更していますが、文面は一部の校正・年月の経過による変更がほとんどです。
・追加ページあり。


******** 注意・備考 ********
・Chromeではローカルファイル上では動作しません。（元からの仕様）
・jqueryを利用した外部JSとCSSありきで動いているのを無理やり変更している箇所がある。まあ多分大丈夫だと思う。
・CSSを使ってしまったので（PC版はページ追加時に#page0のmin-heightを変える場合があり）少しハードルが高くなったかも。
****************************

******** これから編集する人へ ********
・新規ページの作成
①テンプレートをコピーする。
②タイトル(2か所)、画像の場所、説明文を追加する。
③サクラエディタのGrep置換や、TextSS.netなどを利用して、全ページにリンクを追加する。
④場合によっては、「CSS」→「main.css」内の#page0のmin-heightを 45px×最大の項目表示数 に変更する。
⑤Website Explorerなどでリンク切れがないか確かめる。

レイアウトとかの変更
①まずこれ（https://www.buildinsider.net/web/jquerymobileref/01 ）を読む。
②後はhtmlやmain.cssを頑張って変更する。
※index.html（トップページ）のみ構造が少し違う(index-listpanelに名前を変更、appear_listpanelが無いなど)ので注意。
**************************************

********変更箇所（プログラム的な部分）********
--------html--------
・divの閉じタグが1つ足りなかったので追加して修正。
・インラインCSS(.anctionArea)はmain.cssに移動。
・「部屋を移動する」ボタンにid="appear_listpanel"を追加。
作り方としては、テンプレートを作成し、そこから文面をコピー。（トップページを除く）
それに伴って旧サイトの作法室・地学教室ページの表示ミスも修正。

コピペした後にこのサイト(https://www.buildinsider.net/web/jquerymobileref/01)を読んだりして少しコード変えた方が良かったかもとか思ったけど後の祭り。


--------main.css--------
共通
・「anctionAreaクラス」の背景色をhtml全体に適用
・「anctionAreaクラス」のheight:645px;を削除
・「#listpanel」のwidthを250pxに拡大し視認性を改善
・line-heightを1.3から1.4に変更（大きな理由なし）

PC版
・「anctionAreaクラス」にwidth:640pxを指定し、横幅が無尽蔵に大きくなる仕様をカット。
・ページ移動部分のID要素「#listpanel」に（jquery.mobileからブッコ抜いた）CSSを指定、常に表示されるようになっています。
　その代わり「#appear_listpanel」はdisplay:noneに設定して、サイドバーを呼び出すボタンを削除。
　その副作用（ページの縦幅がサイドバーの縦幅に合わせて変動する機能が消滅）の解消として#page0にmin-heightを設定。

スマホ版
・「anctionAreaクラス」のpadding-left,rightを20pxから5%に変更

-------- その他 --------
jqueryとjquery.mobileは「jquery.mobile」フォルダ内に入っています。
トップページの画像の変更（トリミング・一部色の変更）
その他白ぶちのある一部の画像（美術教室・家庭科総合実習室）を修正
**********************************************

******** 部屋の名称変更 ********

・ページ名「被服室」→「被服教室」
・ページ名「一階」→「一階マップ」（2～4階・体育館も同様）
・ページ名「岸高ホール（ホワイエ）」→「岸高ホール・ホワイエ」
・サイドバーのみ「給品室」→「給品部」
・サイドバーのみ「音楽室」→「音楽教室」
・サイドバーのみ「音楽練習室」→「音楽準備室」
　またファイル名を「ongakurenshu.html」から「ongakujunbi.html」に変更、合わせて画像のURLも変更
・ページタイトルの部屋名をサイドバーの表記に統一
　視聴覚教室、食堂（ゆうかりホール）、黎明館・トレーニングルーム


******** 文章の校正 ********
・プール「わかりずらい」→「わかりづらい」
・体育室「毎日のように使用されている大活躍の場だ。」→「毎日のように使用されていて、大活躍している場所だ。」

・校長室
旧：「校長先生がいる部屋」
新：「その名の通り、校長先生がいる部屋。」

旧：「この部屋の前に学内の情報が載った掲示板があったり、隣に来賓室がある。」
新：「この部屋の前には学内の情報が載った掲示板があり、隣には来賓室がある。」

・岸高ホール
旧：「～自習スペースでは、毎週～いそしんでいる。」
新：「～スペースもまた、毎週～いそしんでいる重要な場所である。」

・郷土資料室「ちなみに、写真は銅鐸である。」どうみても銅鐸ではないので削除
・会議室「二階の渡り廊下をわたっていける」→「二階の渡り廊下をわたって行くことができる」(LAN教室と同じ文に変更)
・東選択教室「３年生が授業で使われる」→「３年生の授業で使われる」

・美術教室
「授業で訪れることがある。」→「～ことになる。」
「展示しある」→「展示されている」


******** 情勢の変化による更新 ********
・西選択教室　模試のくだりを削除
・LAN教室「今年から一年の必修科目になった情報の」→「一年生の必修科目、情報の」
・ゼミ関連の記述をLAN教室と視聴覚教室の一部を除き削除（71期とも違うし、73期になったらまた場所が変わるかもしれないので）
図書室：社会ゼミ
視聴覚教室：数学ゼミ
化学実験室：化学ゼミ
生物実験室：生物ゼミ
生物講義室：情報ゼミ
物理実験室：物理ゼミ
・食堂のメニュー画像を現在のものに更新


******** その他変更 ********
・title要素を「（場所の名前） - KISS」に変更
・天体ドーム（屋上）「府立高校で唯一のものであり、」→「府立高校にあるのはかなり珍しく、」
天体ドームは北野高校とか渋谷高校にもあります。他にもあるかも。
http://www.osaka-c.ed.jp/kitano/42campuscape/observatory/telescope.html
http://www.w-consultant.com/cms/shibutani/document.php?pid=2&pno=15&cid=0
ちなみに「天体ドーム 高校」でググったら1ページ目にKISSのページが出てきました。


******** 追加 ********
・放送室(hoso.html)、自治会室(jichikai.html)を追加
新規画像は1024x768、JTrimで品質を70にしています。やや重めかも。(他の写真は50くらい？)
